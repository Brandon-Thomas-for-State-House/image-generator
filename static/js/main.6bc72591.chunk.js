(this["webpackJsonpimage-generator"]=this["webpackJsonpimage-generator"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),i=n.n(o),l=(n(103),n(21)),c=n(22),u=n(23),s=n(24),d=(n(104),n(32)),h=n(41),m=n(49),f=n.n(m),p=n(20),g=n.n(p),v=n(12),b=["src"],y=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={image:null},e.handleLoad=function(){e.setState({image:e.image})},e.filteredProps=function(){return Object.keys(e.props).filter((function(e){return!b.includes(e)})).reduce((function(t,n){return Object(h.a)({},t,Object(d.a)({},n,e.props[n]))}),{})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.loadImage(),this.applyCache()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&(this.loadImage(),this.applyCache())}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.src=this.props.src,this.image.addEventListener("load",this.handleLoad)}},{key:"applyCache",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(v.Image,Object.assign({image:this.state.image,ref:function(t){e.imageNode=t}},this.filteredProps()))}}]),n}(a.Component),w=n(86),E=n.n(w),x=[{numLine:1,fontSize:54,length:10},{numLine:1,fontSize:38,length:13},{numLine:1,fontSize:32,length:27},{numLine:2,fontSize:26,length:38},{numLine:3,fontSize:22,length:60},{numLine:3,fontSize:18,length:90},{numLine:4,fontSize:17,length:100},{numLine:4,fontSize:15,length:150},{numLine:4,fontSize:13.5,length:200},{numLine:5,fontSize:12,length:250},{numLine:5,fontSize:10.8,length:301}],k=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loaded:!1,titleOffsetX:0,reasonFontSize:16,resizingReason:!1,size:400},e.getTitleText=function(){var t=e.props,n=t.title,a=t.location;return n&&n.length?a&&a.length?"".concat(n,", ").concat(a):n:a},e.hasTitle=function(){return!(!e.props.title&&!e.props.location)},e.renderTitle=function(){return!!e.getTitleText()&&r.a.createElement(v.Text,{ref:function(t){return e.titleRef=t},fontFamily:"'Barlow Condensed'",align:"right",fontSize:16,padding:3,fill:g.a.white,text:e.getTitleText()})},e.renderFloatingTitle=function(){var t=e.state.titleOffsetX;return e.hasTitle&&r.a.createElement(v.Label,{x:380,y:110,width:360,offsetX:t,align:"right"},r.a.createElement(v.Tag,{fill:g.a.red}),e.renderTitle())},e.renderInlineTitle=function(){return e.hasTitle&&r.a.createElement(v.Label,{x:20,y:52,align:"right"},r.a.createElement(v.Tag,{fill:g.a.red}),e.renderTitle())},e.renderProfilePicture=function(){var t=e.props.profile;return r.a.createElement(v.Layer,null,r.a.createElement(y,{x:0,y:240,width:400,height:142,src:E.a}),!!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.Circle,{x:330,y:70,width:110,fill:g.a.white,height:110}),r.a.createElement(v.Group,{clipFunc:e.circleClip},r.a.createElement(y,{x:280,y:20,width:100,height:100,src:t})),e.renderFloatingTitle()))},e.renderMetaData=function(){var t=e.props,n=t.profile,a=t.name;return r.a.createElement(v.Layer,null,r.a.createElement(v.Text,{x:20,y:20,fontFamily:"'Barlow Condensed'",fontSize:30,fontWeight:700,width:340,fill:g.a.white,text:a}),n?r.a.createElement(v.Group,null,r.a.createElement(v.Text,{x:20,y:50,fontFamily:"'Barlow Condensed'",fontSize:30,fontWeight:700,width:340,fill:g.a.darkBlue,text:"endorses"}),r.a.createElement(v.Text,{x:20,y:80,fontFamily:"'Barlow Condensed'",fontSize:30,fontWeight:700,width:340,fill:g.a.darkBlue,text:"Brandon Thomas"})):r.a.createElement(v.Group,null,e.hasTitle()&&e.renderInlineTitle(),r.a.createElement(v.Text,{x:20,y:e.hasTitle()?75:50,fontFamily:"'Barlow Condensed'",fontSize:30,fontWeight:700,width:340,fill:g.a.darkBlue,text:"endorses Brandon Thomas"})))},e.renderReason=function(){var t=e.props,n=t.reason,a=t.profile;if(!n)return null;var o=(x.find((function(e){return e.length>n.length}))||{}).fontSize;return r.a.createElement(v.Layer,null,r.a.createElement(v.Group,{y:a?130:120},r.a.createElement(v.Group,{x:25,y:5,width:340},r.a.createElement(v.Text,{ref:function(t){e.reasonRef=t},padding:10,fontSize:o,lineHeight:1.4,fontWeight:100,width:360,fill:g.a.darkBlue,fontFamily:"'Open Sans'",text:n})),r.a.createElement(v.Text,{x:15,y:0,fontSize:50,fontWeight:100,fill:g.a.darkBlue,fontFamily:"'Open Sans'",text:"\u201c"}),r.a.createElement(v.Text,{x:e.reasonRef?Math.max(e.reasonRef.width()-5,95):30,y:e.reasonRef?Math.min(e.reasonRef.height()-5,90):30,fontSize:50,fontWeight:100,fill:g.a.darkBlue,fontFamily:"'Open Sans'",text:"\u201d"})))},e.renderPreview=function(){var t=e.state.size,n=e.props.onSetStageRef;return r.a.createElement("div",null,r.a.createElement("div",{className:g.a.title},"Preview"),r.a.createElement(v.Stage,{width:t,height:t,scale:{x:t/400,y:t/400},ref:n},r.a.createElement(v.Layer,null,r.a.createElement(v.Rect,{width:400,height:400,fill:"#5FBCE5"})),e.renderProfilePicture(),e.renderMetaData(),e.renderReason(),e.renderFooter()))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.document.fonts.ready.then(function(){this.setState({loaded:!0})}.bind(this)),this.setState((function(e){var t=e.size;return{size:Math.min(t,window.screen.width-60)}}))}},{key:"componentDidUpdate",value:function(e,t){var n,a,r=this,o=(n=this.props,a=e,function(e){return n[e]!==a[e]});(o("title")||o("location")&&this.titleRef)&&this.setState({titleOffsetX:this.titleRef?this.titleRef.width():0}),o("reason")&&setTimeout((function(){return r.forceUpdate()}),1)}},{key:"circleClip",value:function(e){e.arc(330,70,50,0,2*Math.PI,!1)}},{key:"renderFooter",value:function(){return r.a.createElement(v.Layer,null,r.a.createElement(v.Text,{x:0,y:385,fontFamily:"'Barlow Condensed'",fontSize:12,fontWeight:700,width:400,align:"center",fill:g.a.darkBlue,text:"votebrandonthomas.com/endorse"}))}},{key:"renderEmpty",value:function(){return r.a.createElement("div",{className:g.a.empty},"Enter a name, reason, and photo for why"," ",r.a.createElement("span",{className:g.a.highlight},"you")," support Brandon to generate a sharable image!")}},{key:"render",value:function(){var e=this.props.name,t=this.state.loaded;return r.a.createElement("div",{className:g.a.component},t&&e?this.renderPreview():this.renderEmpty())}}]),n}(r.a.Component),C=n(199),_=n(42),O=n.n(_),j=n(54),T=n(50),S=n.n(T),L=n(87),z=n.n(L),D=n(90),R=function(e){return new Promise((function(t,n){var a=new Image;a.addEventListener("load",(function(){return t(a)})),a.addEventListener("error",(function(e){return n(e)})),a.setAttribute("crossOrigin","anonymous"),a.src=e}))};function I(e){return e*Math.PI/180}function N(e,t){return F.apply(this,arguments)}function F(){return(F=Object(j.a)(O.a.mark((function e(t,n){var a,r,o,i,l,c,u,s=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:0,e.next=3,R(t);case 3:return r=e.sent,o=document.createElement("canvas"),i=o.getContext("2d"),l=Math.max(r.width,r.height),c=l/2*Math.sqrt(2)*2,o.width=c,o.height=c,i.translate(c/2,c/2),i.rotate(I(a)),i.translate(-c/2,-c/2),i.drawImage(r,c/2-.5*r.width,c/2-.5*r.height),u=i.getImageData(0,0,c,c),o.width=n.width,o.height=n.height,i.putImageData(u,Math.round(0-c/2+.5*r.width-n.x),Math.round(0-c/2+.5*r.height-n.y)),e.abrupt("return",o.toDataURL("image/jpeg"));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(204),P=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={droppedUrl:"",crop:{x:0,y:0},zoom:1},e.onCropChange=function(t){e.setState({crop:t})},e.onZoomChange=function(t){e.setState({zoom:t})},e.handleDrop=function(t,n){var a=n[0];e.setState({droppedUrl:a})},e.handleDelete=function(){e.setState({droppedUrl:void 0}),e.props.onChange("")},e.onCropComplete=function(){var t=Object(j.a)(O.a.mark((function t(n,a){var r,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.droppedUrl,isNaN(a.width)){t.next=6;break}return t.next=4,N(r,a);case 4:o=t.sent,e.props.onChange(o);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderImageLoader=function(){return r.a.createElement(z.a,{withIcon:!0,singleImage:!0,maxFileSize:10485760,className:S.a.uploader,label:"< 10Mb jpg, gif, png",buttonText:"Choose picture of endorser (thats you!)",onChange:e.handleDrop,imgExtension:[".jpg",".gif",".png",".gif"]})},e.renderCropper=function(){var t=e.state,n=t.crop,a=t.zoom,o=t.droppedUrl;return r.a.createElement("div",null,r.a.createElement("div",{className:S.a.cropper},r.a.createElement(D.a,{image:o,crop:n,zoom:a,aspect:1,cropShape:"round",showGrid:!1,onCropChange:e.onCropChange,onCropComplete:e.onCropComplete,onZoomChange:e.onZoomChange})),r.a.createElement(B.a,{className:S.a.slider,value:a,min:1,max:3,step:.05,"aria-labelledby":"Zoom",onChange:function(t,n){return e.onZoomChange(n)}}),r.a.createElement("div",{className:S.a.button,onClick:e.handleDelete},"Remove or Change Image"))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.droppedUrl;return r.a.createElement("div",null,e?this.renderCropper():this.renderImageLoader())}}]),n}(a.Component),M=n(200),U=n(202),W=n(196),A=n(203),G=n(201),q=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleInputChange=function(t){var n=t.target.value;e.props.onChange(n)},e.handleCheckboxChange=function(t){var n=t.target.checked;e.props.onChange(n)},e.renderImageLoader=function(){var t=e.props,n=t.config,a=t.value,o=t.onChange;return r.a.createElement(P,{onChange:o,value:a,label:n.label})},e.renderRadio=function(){var t=e.props,n=t.config,a=t.value;return r.a.createElement(A.a,{component:"fieldset"},r.a.createElement(U.a,{row:!0,"aria-label":n.label,name:n.label,value:a,onChange:e.handleInputChange},n.options.map((function(e){return r.a.createElement(W.a,{key:e,value:e,control:r.a.createElement(M.a,null),label:e})}))))},e.renderTextField=function(){var t=e.props,n=t.config,a=t.value,o=a?n.maxLength-a.length:n.maxLength,i=n.maxLength&&o<10?"Character's Remaining: ".concat(o):n.helperText;return r.a.createElement(C.a,{error:n.maxLength&&o<10,multiline:n.multiline,rows:n.multiline?4:1,fullWidth:!0,variant:"outlined",value:a,label:n.label,helperText:i,onChange:e.handleInputChange,inputProps:{maxLength:n.maxLength,"aria-label":n.label}})},e}return Object(c.a)(n,[{key:"renderCheckbox",value:function(){var e=this.props,t=e.config,n=e.value;return r.a.createElement(W.a,{control:r.a.createElement(G.a,{checked:n,onChange:this.handleCheckboxChange,name:t.label}),"aria-label":t.label,label:t.label})}},{key:"renderPicker",value:function(){switch(this.props.config.type){case"text":return this.renderTextField();case"image":return this.renderImageLoader();case"radio":return this.renderRadio();case"checkbox":return this.renderCheckbox();default:throw new Error('Config is not working because "type '.concat(this.props.config.type,'"" does not exist'))}}},{key:"render",value:function(){return this.renderPicker()}}]),n}(r.a.Component),J=n(69),V=n.n(J),X=n(48),Z=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getDataUrl=function(){return e.props.stageRef.getStage().toDataURL({pixelRatio:3})},e.handleDownload=function(){var t=e.getDataUrl(),n="".concat(e.props.name.toLowerCase().trim().replace(" ","_"),"_endorses_brandon.png");e.goToUri(t,{fileName:n}),e.trackDownload()},e.trackDownload=function(){var t=e.props.trackingData;X.a.event({category:"Download",action:"Download PNG",label:JSON.stringify(t)})},e}return Object(c.a)(n,[{key:"goToUri",value:function(e,t){var n=window.document.createElement("a");t.fileName&&(n.download=t.fileName),t._blank&&(n._blank=t._blank),n.href=e,window.document.body.appendChild(n),n.click(),window.document.body.removeChild(n)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{name:"download",className:V.a.button,onClick:this.handleDownload},"Download"),r.a.createElement("div",{className:V.a.disclaimer},"(when you are finished)"))}}]),n}(a.Component),H={name:{required:!0,type:"text",label:"Your name"},reason:{multiline:!0,type:"text",label:"Reason for support",maxLength:300,helperText:"Why do you support Brandon? Specificity is better!"},profile:{type:"image",label:"Endorser Photo"},title:{type:"text",label:"Title",helperText:"i.e. Teacher, Parent, Voter"},location:{type:"text",label:"Location",helperText:"i.e. Murfreesboro, LaVergne Lake Elementary"}},K=Object.keys(H).filter((function(e){return!!H[e].required})),Q=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={form:Object.keys(H).reduce((function(e,t){return Object(h.a)({},e,Object(d.a)({},t,H[t].defaultValue))}),{})},e.handleFormChange=function(t){return function(n){e.setState((function(e){return{form:Object(h.a)({},e.form,Object(d.a)({},t,n))}}))}},e.hasRequired=function(){return K.every((function(t){return!!e.state.form[t]}))},e.handleSetStageRef=function(t){e.stageRef=t},e}return Object(c.a)(n,[{key:"renderField",value:function(e,t,n,a){return r.a.createElement("div",{key:a,className:f.a.field},r.a.createElement(q,{config:e,value:t,onChange:n}))}},{key:"buildTrackingData",value:function(e){return e&&e.canCampaignUse?e:Object.keys(e).reduce((function(t,n){return Object(h.a)({},t,Object(d.a)({},n,(e[n]||"").length))}),{})}},{key:"render",value:function(){var e=this,t=this.state.form;return r.a.createElement("main",{role:"main",className:f.a.component},r.a.createElement("div",{className:f.a.preview},r.a.createElement(k,Object.assign({onSetStageRef:this.handleSetStageRef,hasRequired:this.hasRequired()},t))),r.a.createElement("div",{className:f.a.fields},Object.keys(t).map((function(n){return e.renderField(H[n],t[n],e.handleFormChange(n),n)})),this.stageRef&&r.a.createElement(Z,{name:t.name,stageRef:this.stageRef,trackingData:this.buildTrackingData(t)})))}}]),n}(r.a.Component),Y=n(70),$=n.n(Y);function ee(){return r.a.createElement("div",{className:$.a.component},r.a.createElement("div",{className:$.a.accent}))}var te=n(45),ne=n.n(te);function ae(){return r.a.createElement("header",{role:"banner",className:ne.a.component},r.a.createElement("div",{className:ne.a.case},r.a.createElement("div",{className:ne.a.title},"We endorse ",r.a.createElement("span",{className:ne.a.candidate},"Brandon Thomas")," "),r.a.createElement("div",{className:ne.a.tagline},"(generator)")))}var re=n(71),oe=n.n(re),ie=n(197),le=[{href:"https://secure.actblue.com/donate/thomas49/endorsement-generator",label:"Contribute"},{href:"https://www.mobilize.us/votebrandonthomas/?utm_source=endorsement-generator",label:"Volunteer"},{href:"https://votebrandonthomas.com/?utm_source=endorsement-generator",label:"votebrandonthomas.com"},{href:"mailto:kevinahuber@gmail.com",label:"Feedback"}];function ce(){return r.a.createElement("footer",{className:oe.a.component},le.map((function(e,t){return r.a.createElement(ie.a,{key:t,href:e.href,className:oe.a.link},e.label)})))}var ue=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){X.a.initialize("UA-178512622-2"),X.a.pageview(window.location.pathname+window.location.search)}},{key:"render",value:function(){return null}}]),n}(a.Component),se=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(c.a)(n,[{key:"inIframe",value:function(){try{return window.self!==window.top}catch(e){return!0}}},{key:"componentDidMount",value:function(){var e=this.inIframe();this.setState({inIframe:e})}},{key:"render",value:function(){var e=this.state.inIframe;return r.a.createElement("div",{className:"App"},!e&&r.a.createElement(ue,null),!e&&r.a.createElement(ae,null),r.a.createElement(Q,null),r.a.createElement(ee,null),!e&&r.a.createElement(ce,null))}}]),n}(r.a.Component),de=n(198);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=n(89),me=Object(he.a)({palette:{primary:{main:"#354e98",light:"#354e98",text:"#354e98"},secondary:{main:"#354e98"}}});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de.a,{theme:me},r.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,n){e.exports={white:"#f2f0f1",lightBlue:"#37acdf",darkBlue:"#354e98",red:"#b13539",title:"Preview_title__unOsw",button:"Preview_button__1xPFi",empty:"Preview_empty__IZW5l",disclaimer:"Preview_disclaimer__3t1i7",highlight:"Preview_highlight__3JzAg"}},45:function(e,t,n){e.exports={component:"Title_component__13OnF",title:"Title_title__1jlrO",candidate:"Title_candidate__8WGwV",tagline:"Title_tagline__3p9DK"}},49:function(e,t,n){e.exports={component:"Editor_component__19dB7",fields:"Editor_fields__1pTs_",preview:"Editor_preview__1urAQ",field:"Editor_field__1VJIA",hint:"Editor_hint__1JkXw"}},50:function(e,t,n){e.exports={cropper:"ImagePicker_cropper__Op_bh",button:"ImagePicker_button__1Bcrq"}},69:function(e,t,n){e.exports={disclaimer:"DownloadButton_disclaimer__3sEHp",button:"DownloadButton_button__ammlh"}},70:function(e,t,n){e.exports={component:"Background_component__4-zPE"}},71:function(e,t,n){e.exports={component:"Footer_component__3T3DJ",link:"Footer_link__Xabb2"}},86:function(e,t,n){e.exports=n.p+"static/media/brandon.4b929c6f.png"},99:function(e,t,n){e.exports=n(158)}},[[99,1,2]]]);
//# sourceMappingURL=main.6bc72591.chunk.js.map